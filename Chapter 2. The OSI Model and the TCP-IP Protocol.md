```toc
```

## Internet
- TCP/IP 프로토콜을 이용해 정보를 주고 받는 컴퓨터 네트워크
- network-network
	- 중앙 제어 방식 (CSN)
		- 중앙이 폭파되면 마비될 수 있다.
- 인터넷은 목적지만 작성하면 경로를 중앙에서 컨트롤하지 않고, 찾아서 감
	- 경로 설정하는 중앙 제어가 없어지며 파생되는 기술들 발생
	- 


## CSN vs PSN
- CSN (Circuit Switching Network)
	- 경로 설정할 때 중앙 제어를 필요로 하는 전달 방식
	- 미리 경로 설정하는 단계를 필요로 한다.
	- 한번 경로가 설정되면 그 경로를 연결이 끝날 때 까지 바뀌지 않는다.
- PSN (Packet Switching Network)
	- 경로 설정 시 중앙 제어 없이 목적지 주소 전달 방식
	- 택배와 유사하게 동작한다.
- 인터넷은 PSN 기반의 네트워크이며, 따라올 수 밖에 없는 특징들이 있다.

## OSI Layers
### Application
- 7계층에서 Application, Presentation, Session을 합쳐 Application으로 볼 것이다.

### Transport
- process에서 process로 message를 딜리버리한다.
	- 프로세스를 구분하기 위해서 port number를 할당한다.

### Network
- source to destination으로 packet을 이동시킨다. 

### Data Link
- hop-to-hop delivery를 수행하게 된다.
- frame 단위로 비트를 구성한다.
- 학기중 다루진 않지만, 이해하고 있어야 한다.

### Physical
- 수업 중 다루지 않을 것이다.


- 레이어는 다음과 같이 구성되어 데이터가 전송되게 된다.
	![[Pasted image 20220908175023.png]]
- 어플리케이션에서 데이터를 만들면, 패킷으로 쪼개지게 된다.
	- 이 크기가 대략 500바이트로 정해져 있다.
	- 큰 데이터를 보내는 경우, 500바이트 단위로 잘라 보내게 되는 것이다.
- 헤더에 port number를 넣어 위치를 지정하는 일이 transport layer의 역할 중 하나이다.
	- 수행되는 일이 많지만, 그 중 하나가 헤더에 port를 삽입하는 것이다.
	- 헤더는 보통 20바이트로 구성되며, 다양한 정보가 들어가게 된다.
		- 그 중 하나가 port number이고, 4바이트로 구성된다.
- 네트워크 레이어에는 sender와 receiver의 ip 주소가 담기게 된다.
	- 추가적인 헤더를 만들고, 이 또한 20바이트로 구성된다.
		- sender 4바이트, receiver 4바이트.
		- 나머지는 다른 정보가 담기게 된다.
- 다음 hop으로 보내주어야 하고, 이더넷으로 로컬에서 보내주어야 한다
	- MAC 주소를 필요로 하고, H2에 들어가게 된다.


## Hop-to-Hop
![[Pasted image 20220912165036.png]]

- 이 그림은 Network / Data Link 2개의 레이어에 대해 중점적으로 그림이 그려져 있다.
	- 이 그림을 이해해야 Hop-to-Hop과 Source-to-Dest를 이해할 수 있다.
- A가 P로 보낸다.
	- 라우팅 테이블이 D / N으로 구성되어 있다.
		- 목적지로 가기 위해서 어떤 경로로 이동해야 하는지 Next 정보가 담기게 된다.
		- 이러한 정보들이 중앙에 모두 담겨있는것이 아닌, 라우터들끼리 주고 받아 라우팅 테이블이 완성되는 것이다.
	- P로 가기 위해서는 F로 이동해야한다는 정보를 담게 된다.
		- 이때, 여기 A뿐만이 아니라 여러 다른 클라이언트들이 존재하게 된다.
		- 로컬에서 데이터를 보낼 때는 프레임에 MAC 주소를 명시해야 서로 주고받을 수 있다.
			- 따라서 F/20으로 명시해야 데이터가 정상적으로 전송되게 된다.
			- F라는 ip 주소를 사용하고 있는 디바이스에 MAC 주소가 무엇인지 테이블에 저장해둔 것이 있으면 찾아온다.
				- 없으면 다른 곳에서 찾아온다.

- A-F까지를 Hop-to-Hop, A-P를 Source-to-Dest라 한다.
	- A에서 다음 로드까지 가는 것을 Hop-to-Hop이라고 한다.
	- A-F는 자동으로 이동하는 것이 아닌, 프레임을 이동시켜 주어야 정상적인 위치로 갈 수 있다.
	- 라우터는 자신의 MAC 주소를 본인이 알고 있다.
		- 따라서 프레임이 들어올 때 마다 최종적으로 패킷이 가야 할 위치를 헤더를 통해 찾는다.
		- 라우터도 라우팅 테이블을 바탕으로 동일하게 탐색을 진행하고, 결과로 보내주게 된다.

![[Pasted image 20220912171319.png]]
- 이동하는 과정에서, 동일하게 다른 주소로 이동하지 않고 원하는 위치로 이동하게 하기 위해 MAC 주소를 명기한 Frame을 만들어 주어야 한다
	- 프레임을 만들기 위해서는 우리의 목적지가 담긴 ip 주소를 갖고 있는 디바이스의 MAC 주소를 찾아오는 것이다.
- 스위치가 MAC 내부에 있는지 알고 있으면 목적지에만 보내고, 모르면 그냥 다 보낸다.
	- 프레임을 받으면 자신으로 온 것인지 확인하는 과정을 필요로 한다.
		- 목적지에 대한 ip 주소를 확인하여 이를 수행할 수 있다.

![[Pasted image 20220912171449.png]]
- 받아왔으면 다시 보내주는 것이다.
- ip 주소는 unique하다.
	- ip 주소는 하나뿐인데, 왜 Hop-to-Hop에서 MAC 주소를 사용할까?
		- 인터넷이 처음 개발될 당시 LAN은 프레임에 MAC 주소를 사용하도록 표준화가 되어 있었기 때문이다.
			- Frame 사용하는 것은 Data-link Layer이다.
			- IP 주소 사용하는 것은 Network Layer이다.
		- 네트워크 레이어의 주소 체계가 다양했다. 인터넷은 IP를 사용하지만 네트워크간의 연결에 다른 프로토콜도 사용했다.
			- 밑에는 MAC 주소로 통일하면 Network Layer가 다른 프로토콜일지라도 LAN에서는 문제 없이 동작하도록 할 수 있다.
			- 네트워크 레이어에서는 다른 것을 사용할 수 있다.
				- 다른 프로토콜이 죽고 인터넷만 살아남았다.
		- 결론적으로 인터넷이 개발될 당시 다른 프로토콜도 존재했기 때문에 MAC 주소를 사용한다.
- MAC 주소는 local에서만 유일하다. 전세계에 단 하나만 있어도 되고 로컬 망에서만 유일해도 된다.
	- 제조 회사들이 MAC 주소를 부여하게 된다.

## OSI Layers
![[Pasted image 20220912172252.png]]
- 5-7은 Application Layer로 이해한다.
- Layer-to-Layer Communication
	- 각 레이어마다 보는 정보는 정해져 있다.
		- 레이어를 내려가면서 편지 봉투(헤더) 등이 새로 생기게 되고, 네트워크에서 보면 헤더들이 계속 추가되는 것이다.
		- 각 레이어마다 헤더는 자신의 레이어에 적힌 것만 확인한다는 것이다.
			- 상대방은 자신과 같은 레이어에 대해서만 정보를 보내게 되는 것이다.
- Port 번호와 IP 주소가 담기면 Data Link 프레임이 완성된다.
	- 여기서 Hop-to-Hop 주소가 붙게 되고, 원하는 dest가 있는 라우터로 이동하게 된다.
		- 라우터에서는 MAC 주소로 본인 확인을 하고, 네트워크 레이어로 보낸다.
		- 네트워크 레이어에서는 IP를 확인하고 다음 위치의 IP를 라우팅 테이블에서 찾아 적어 다음 레이어로 보낸다.
- 이 과정을 반복하여 우리가 원하는 destination으로 데이터를 전송하게 된다.
	- 레이어는 자신의 레이어에 적힌 정보만 확인하고, 다른 정보는 확인하지 않는다.
	- 전통적인 네트워크 장비는 다음과 같이 작동하고, 보안 장비 등은 레이어를 파고 들어가 헤더 등을 확인할 수 있다.
- 같은 레이어끼리 communication을 진행하고, communication에 필요한 정보는 헤더에 적혀 있다.
	- Transport Layer간의 통신을 가장 많이 보게 될 것이다.