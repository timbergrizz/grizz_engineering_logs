```toc
```
## 네트워크 프로그래밍과 소켓
- 네트워크 프로그래밍 : 네트워크로 연결된 둘 이상의 컴퓨터 사이에서의 데이터 송수신 프로그램 작성

### 소켓
- 네트워크(인터넷)의 연결 도구
- 운영 체제에 의헤 재공되는 소프트웨어적 장치
	- 단계를 추상화하여 프로그래머에게 데이터 송수신에 대한 물리적 / 소프트웨어적 디테일을 숨길 수 있다.
- 컴퓨터는 네트워크에 데이터를 보내고 받을 때 파일처럼 다룬다.
	- 소켓에 파일처럼 작성하여 데이터를 보내고, 파일을 읽어오듯이 데이터를 소켓에서 읽어온다.
- 소켓은 socket 함수의 호출을 통해 생성할 수 있다.
	- 데이터를 전송하기 위한 소켓과 데이터를 수신하기 위한 소켓은 생성 방식이 다르다.
		- 데이터를 전송하는 쪽이 클라이언트, 데이터를 수신하는 쪽이 서버가 된다.
	- 우리는 어플리케이션만 다루고, 소켓을 다루는 것은 운영 체제의 몫이다.
		- 커널 단에서 모두 해결되게 된다.

- 소켓의 주소 할당 및 연결
	- 소켓에도 주소 정보가 할당되고, 이러한 주소 정보는 IP와 포트 번호로 구성된다.

### 연결을 요청할 수 있는 소켓
- 연결 요청이 가능한 상태의 소켓
	- 송신용 소켓은 연결 요청이 가능한 소켓이 될 필요가 없다.
	- 연결 요청이 가능한 상태의 소켓은 데이터를 수신하는 용도의 소켓에서 필요하다.
		- 일반 소켓은 데이터를 요청하는 쪽에서는 그냥 사용할 수 있지만, 서버 단에서는 서버 소켓으로 바꾸어 사용해야 한다.
	- listen 함수는 소켓 번호를 주면 일반 소켓을 연결 요청이 가능한 상태로 변경한다.
		- 이는 데이터를 수신할 수 있도록 한다.
		- 클라이언트가 연결 요청을 했을 때 데이터를 수신할 수 있도록 하는 것이다.

- 연결 요청의 수락
	- 연결 요청이 수락되어야 데이터의 송수신이 가능하다.
	- 수락된 이후의 데이터의 송수신은 양방향으로 가능하다.

- 연결 요청을 허용하는 소켓의 생성 과정
	1. 소켓의 생성 -> socket 함수 호출
	2. IP와 포트 번호 할당 -> bind 함수 호출
	3. 연결 요청 가능 상태로 변경 -> listen 함수 호출
	4. 연결 요청에 대한 수락 -> accept 함수 호출
		- accept함수는 무언가 이벤트가 생기기 전까지 함수가 계속 실행되는 블락 함수이다.
		- ㅗ
- 연결 요청을 허용하는 프로그램을 가리켜 서버라고 한다.
	- 서버는 연결을 요청하는 클라이언ㅋ보다 먼저 실행되어야 한다.
	- 클라이언트보다 복잡한 실행의 과정을 거친다.
	- 이렇게 생성된 소켓을 가리켜 서버 소켓 또는 리스닝 소켓이라 한다.
- connect을 

### 연결을 요청하는 소켓
- 연결을 요청하는 소켓의 구현
	- 리스닝 소켓과 바인딩은 동일하게 동작한다.
	- connect 함수를 통해 연결을 수행할 수 있다.

## 소켓 vs 풀트
- 멀티 프로세서 가고 하다보면 이해가 안될수 있다.
	- 이거 두개는 다르다는 것을 이해하자.

## 소켓
- 우리가 작성하는 어플리케이션과 TCP가 있을 것이다.
	- 이를 관리하는 매니저가 있을 것이고, 매니저가 어떻게 서버로 연결을 할 것이며, 다른 서버로 데이터를 송수신 할 것인가?
- 리눅스는 저수준으로 파일을 처리하는데, 이때 쓰는 것이 file descripter이다.
	- 0은 표준 입력 / 1은 표준 출력 / 2는 예외를 의미하게 된다.
	- 소켓을 만들면 file descripter의 3번부터 배정된다.
	- 중요한것은 어떻게 어플리케이션에서 데이터를 줘야 TCP로 데이터가 넘어가는 것인지 아는 것이다.
		- 그리고 데이터를 어떻게 받아올 것인지도 이해할 수 있어야 한다.
	- 리눅스는 소켓과 파일을 동일하게 처리한다.
		- read/write로 다 처리가 된다.
- 서버 소켓을 만들면, 이러한 만든 것을 매니저에게 알려주서야 한다.
	- 접속하는 서버의 IP 주소와 포트 번호를 소켓에 알려줄 수 있어야 한다.
		- 이 함수가 bind함수가 된다.
- 클라이언트에서는 시스템에서 자동으로 할당하고, 서버는 이를 매뉴얼하게 지정해준다.
	- 서버로 접속해야 하는 ip와 포트 번호가 무엇인지 구조를 넘겨주어야 한다.
- 다음과 같은 과정으로 작동이 진행된다.

#### 파일 디스크립터와 소켓
- 소켓은 3번부터 할당된다고 했다.
	- 읽을때는 3번부터 데이터를 가져오고, 데이터를 가져오게 된다.
